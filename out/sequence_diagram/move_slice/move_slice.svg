<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="816px" preserveAspectRatio="none" style="width:753px;height:816px;" version="1.1" viewBox="0 0 753 816" width="753px" zoomAndPan="magnify"><defs><filter height="300%" id="fnsx063fgm2s" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="162.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="215.5" y="117.7988"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="124.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="220.5" y="155.1094"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="213.8184" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="215.5" y="316.3516"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="176.5078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="220.5" y="353.6621"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="159.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="215.5" y="551.4805"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="122.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="220.5" y="588.791"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="149.5078" style="stroke: #000000; stroke-width: 2.0;" width="464" x="163" y="373.6621"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="464" x="163" y="449.5938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="86.4883" y2="729.0332"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="220" x2="220" y1="86.4883" y2="729.0332"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="456.5" x2="456.5" y1="86.4883" y2="729.0332"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="587" x2="587" y1="86.4883" y2="729.0332"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="686" x2="686" y1="86.4883" y2="729.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="8" y="83.5352">User</text><ellipse cx="26.5" cy="13" fill="#FEFECE" filter="url(#fnsx063fgm2s)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26.5,21 L26.5,48 M13.5,29 L39.5,29 M26.5,48 L13.5,63 M26.5,48 L39.5,63 " fill="none" filter="url(#fnsx063fgm2s)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="8" y="741.5684">User</text><ellipse cx="26.5" cy="754.5215" fill="#FEFECE" filter="url(#fnsx063fgm2s)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26.5,762.5215 L26.5,789.5215 M13.5,770.5215 L39.5,770.5215 M26.5,789.5215 L13.5,804.5215 M26.5,789.5215 L39.5,804.5215 " fill="none" filter="url(#fnsx063fgm2s)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fnsx063fgm2s)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="173" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="180" y="71.5352">AudioBlock</text><rect fill="#FEFECE" filter="url(#fnsx063fgm2s)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="173" y="728.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="180" y="748.5684">AudioBlock</text><rect fill="#FEFECE" filter="url(#fnsx063fgm2s)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="404.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="411.5" y="71.5352">EventEmitter</text><rect fill="#FEFECE" filter="url(#fnsx063fgm2s)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="404.5" y="728.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="411.5" y="748.5684">EventEmitter</text><rect fill="#FEFECE" filter="url(#fnsx063fgm2s)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="558" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="565" y="71.5352">Editor</text><rect fill="#FEFECE" filter="url(#fnsx063fgm2s)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="558" y="728.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="565" y="748.5684">Editor</text><rect fill="#FEFECE" filter="url(#fnsx063fgm2s)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="627" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="634" y="71.5352">ChannelAction</text><rect fill="#FEFECE" filter="url(#fnsx063fgm2s)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="627" y="728.0332"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="634" y="748.5684">ChannelAction</text><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="162.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="215.5" y="117.7988"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="124.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="220.5" y="155.1094"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="213.8184" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="215.5" y="316.3516"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="176.5078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="220.5" y="353.6621"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="159.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="215.5" y="551.4805"/><rect fill="#FFFFFF" filter="url(#fnsx063fgm2s)" height="122.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="220.5" y="588.791"/><polygon fill="#A80036" points="203.5,113.7988,213.5,117.7988,203.5,121.7988,207.5,117.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="209.5" y1="117.7988" y2="117.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="33.5" y="113.0566">user mouse down on block</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="225.5" x2="272.5" y1="142.1094" y2="142.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="272.5" y1="142.1094" y2="155.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="231.5" x2="272.5" y1="155.1094" y2="155.1094"/><polygon fill="#A80036" points="241.5,151.1094,231.5,155.1094,241.5,159.1094,237.5,155.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="237.5" y="137.3672">mouseDownHandler()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="230.5" x2="272.5" y1="189.4199" y2="189.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="272.5" y1="189.4199" y2="202.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="231.5" x2="272.5" y1="202.4199" y2="202.4199"/><polygon fill="#A80036" points="241.5,198.4199,231.5,202.4199,241.5,206.4199,237.5,202.4199" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="237.5" y="184.6777">setDragging(true)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="230.5" x2="272.5" y1="231.7305" y2="231.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="272.5" y1="231.7305" y2="244.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="231.5" x2="272.5" y1="244.7305" y2="244.7305"/><polygon fill="#A80036" points="241.5,240.7305,231.5,244.7305,241.5,248.7305,237.5,244.7305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="237.5" y="226.9883">initDrag(e)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="230.5" x2="272.5" y1="279.041" y2="279.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="272.5" y1="279.041" y2="292.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="225.5" x2="272.5" y1="292.041" y2="292.041"/><polygon fill="#A80036" points="235.5,288.041,225.5,292.041,235.5,296.041,231.5,292.041" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="237.5" y="274.2988">draggingEffect</text><path d="M341,259.2305 L341,284.2305 L507,284.2305 L507,269.2305 L497,259.2305 L341,259.2305 " fill="#FBFB77" filter="url(#fnsx063fgm2s)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M497,259.2305 L497,269.2305 L507,269.2305 L497,259.2305 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="347" y="276.7988">track block pos update</text><polygon fill="#A80036" points="203.5,312.3516,213.5,316.3516,203.5,320.3516,207.5,316.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="209.5" y1="316.3516" y2="316.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="33.5" y="311.6094">mouse move</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="225.5" x2="272.5" y1="340.6621" y2="340.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="272.5" y1="340.6621" y2="353.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="231.5" x2="272.5" y1="353.6621" y2="353.6621"/><polygon fill="#A80036" points="241.5,349.6621,231.5,353.6621,241.5,357.6621,237.5,353.6621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="237.5" y="335.9199">mouseMoveEffect()</text><path d="M163,373.6621 L225,373.6621 L225,380.6621 L215,390.6621 L163,390.6621 L163,373.6621 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="149.5078" style="stroke: #000000; stroke-width: 2.0;" width="464" x="163" y="373.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="178" y="387.2305">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183" x="240" y="386.2969">[Mouse is in screen left or right]</text><polygon fill="#A80036" points="444.5,408.2832,454.5,412.2832,444.5,416.2832,448.5,412.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="230.5" x2="450.5" y1="412.2832" y2="412.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="237.5" y="407.541">emit('editorRequestAutoScrollX')</text><polygon fill="#A80036" points="575.5,437.5938,585.5,441.5938,575.5,445.5938,579.5,441.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="456.5" x2="581.5" y1="441.5938" y2="441.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="463.5" y="436.8516">autoScrollXEffect</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="163" x2="627" y1="450.5938" y2="450.5938"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="168" y="461.2285">[Mouse is in middle area]</text><polygon fill="#A80036" points="444.5,481.8594,454.5,485.8594,444.5,489.8594,448.5,485.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="230.5" x2="450.5" y1="485.8594" y2="485.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="237.5" y="481.1172">emit('editorCancelAutoScrollX')</text><polygon fill="#A80036" points="575.5,511.1699,585.5,515.1699,575.5,519.1699,579.5,515.1699" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="456.5" x2="581.5" y1="515.1699" y2="515.1699"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="463.5" y="510.4277">autoScrollXEffect</text><polygon fill="#A80036" points="203.5,547.4805,213.5,551.4805,203.5,555.4805,207.5,551.4805" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="209.5" y1="551.4805" y2="551.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="33.5" y="546.7383">mouse up</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="225.5" x2="272.5" y1="575.791" y2="575.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="272.5" x2="272.5" y1="575.791" y2="588.791"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="231.5" x2="272.5" y1="588.791" y2="588.791"/><polygon fill="#A80036" points="241.5,584.791,231.5,588.791,241.5,592.791,237.5,588.791" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="237.5" y="571.0488">mouseUpEffect()</text><polygon fill="#A80036" points="444.5,619.1016,454.5,623.1016,444.5,627.1016,448.5,623.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="230.5" x2="450.5" y1="623.1016" y2="623.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="237.5" y="618.3594">emit('editorCancelAutoScrollX')</text><polygon fill="#A80036" points="575.5,648.4121,585.5,652.4121,575.5,656.4121,579.5,652.4121" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="456.5" x2="581.5" y1="652.4121" y2="652.4121"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="463.5" y="647.6699">autoScrollXEffect</text><polygon fill="#A80036" points="444.5,677.7227,454.5,681.7227,444.5,685.7227,448.5,681.7227" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="230.5" x2="450.5" y1="681.7227" y2="681.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="237.5" y="676.9805">setDragging(false)</text><polygon fill="#A80036" points="674.5,707.0332,684.5,711.0332,674.5,715.0332,678.5,711.0332" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="220.5" x2="680.5" y1="711.0332" y2="711.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="227.5" y="706.291">updateSlice()</text><!--
@startuml
actor User

User -> AudioBlock: user mouse down on block
activate AudioBlock
AudioBlock -> AudioBlock: mouseDownHandler()
activate AudioBlock
AudioBlock -> AudioBlock: setDragging(true)
AudioBlock -> AudioBlock: initDrag(e)
AudioBlock -> AudioBlock: draggingEffect
note right: track block pos update
deactivate AudioBlock
deactivate AudioBlock

User -> AudioBlock: mouse move
activate AudioBlock
AudioBlock -> AudioBlock: mouseMoveEffect()
activate AudioBlock
alt Mouse is in screen left or right
  AudioBlock -> EventEmitter: emit('editorRequestAutoScrollX')
  EventEmitter -> Editor: autoScrollXEffect
else Mouse is in middle area
  AudioBlock -> EventEmitter: emit('editorCancelAutoScrollX')
  EventEmitter -> Editor: autoScrollXEffect
end
deactivate AudioBlock
deactivate AudioBlock

User -> AudioBlock: mouse up
activate AudioBlock
AudioBlock -> AudioBlock: mouseUpEffect()
activate AudioBlock
  AudioBlock -> EventEmitter: emit('editorCancelAutoScrollX')
  EventEmitter -> Editor: autoScrollXEffect
  AudioBlock -> EventEmitter: setDragging(false)
  AudioBlock -> ChannelAction: updateSlice()
deactivate AudioBlock
deactivate AudioBlock

@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 13.0.2+8
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>